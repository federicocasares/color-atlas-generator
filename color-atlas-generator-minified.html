<!DOCTYPE html><html lang="en"><head> <meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <title>Color Texture Atlas Generator</title> <style>body{font-family: Arial, sans-serif;}h1{margin-top: 0;}canvas{border: 1px solid #ccc; max-width: 100%; display: block; margin: auto;}#container{border-radius: 5px; margin: 20px auto; padding: 20px; border: 1px solid #ccc; width: 80%; max-width: 600px; background-color: #f9f9f9;}label{width: 200px; display: inline-block;}input[type="text"], input[type="number"], input[type="checkbox"], select{padding: 5px;}input[type="text"], input[type="number"]{width: 100px;}select{width: 150px;}button{margin: 10px 0px; padding: 10px 20px; background-color: #007BFF; color: #fff; border: none; cursor: pointer; border-radius: 5px; font-weight: bold;}form div{min-height: 40px;}#errorContainer{color: red; font-weight: bold; margin: 10px 0; border: 1px solid red; border-radius: 5px; padding: 10px; background-color: #ffe6e6;}#errorContainer:empty{display: none;}.tooltip{position: relative; display: inline-block; cursor: help;}.tooltip .tooltiptext{font-size: 12px; visibility: hidden; width: 200px; background-color: #333; color: #fff; text-align: center; border-radius: 5px; padding: 5px; position: absolute; z-index: 1; bottom: 125%; left: 50%; transform: translateX(-50%); opacity: 0; transition: opacity 0.3s;}.tooltip:hover .tooltiptext{visibility: visible; opacity: 1;}</style></head><body> <div id="container"> <h1>Color Texture Atlas Generator</h1> <div id="errorContainer"></div><form id="settings-form"> <div> <label for="width">Width (px):</label> <input type="number" id="width" value="512"> <span class="tooltip">[?] <span class="tooltiptext">Width of the texture atlas in pixels.</span> </span> </div><div> <label for="height">Height (px):</label> <input type="number" id="height" value="256"> <span class="tooltip">[?] <span class="tooltiptext">Height of the texture atlas in pixels.</span> </span> </div><div> <label for="hueSteps">Hue steps:</label> <input type="number" id="hueSteps" value="6"> <span class="tooltip">[?] <span class="tooltiptext">Number of different hues that will be used for the atlas.</span> </span> </div><div> <label for="hueSteps">Hue offset (&deg;):</label> <input type="number" id="hueOffset" value="-10"> <span class="tooltip">[?] <span class="tooltiptext">Offset all hues by this amount of degrees.</span> </span> </div><div> <label for="luminanceSteps">Luminance steps:</label> <input type="number" id="luminanceSteps" value="8"> <span class="tooltip">[?] <span class="tooltiptext">Number of different luminance values that will be used for the atlas.</span> </span> </div><div> <label for="saturations">Saturation (%) values:</label> <input type="text" id="saturations" value="20,85"> <span class="tooltip">[?] <span class="tooltiptext">Comma-separated list of saturation % to use for colors of this atlas. A whole new column (with hues as sub-columns) will be created for each one.</span> </span> </div><div> <label for="hueRemap">Hue remapping:</label> <input type="checkbox" id="hueRemap" checked> <span class="tooltip">[?] <span class="tooltiptext">If checked, hues will not be evenly spaced. Space will be taken away from green tones and given to yellow and blue tones, which usually provides, from a human perception point of view, greater variety of colors in the atlas.</span> </span> </div><div> <label for="addGrayscale">Add grayscale column:</label> <input type="checkbox" id="addGrayscale" checked> <span class="tooltip">[?] <span class="tooltiptext">If checked, a column with grayscale shades from black to white will be added as a first column.</span> </span> </div><div> <label for="bordersDropdown">Borders:</label> <select id="bordersDropdown"> <option value="none">None</option> <option value="columns">Columns</option> <option value="rows">Rows</option> <option value="both" selected>Both</option> </select> <span class="tooltip">[?] <span class="tooltiptext">Leave a couple of free pixels between cells to separate colors.</span> </span> </div><div> <label for="behaviorDropdown">Behavior if not divisible:</label> <select id="behaviorDropdown"> <option value="nothing">Do nothing</option> <option value="shrink">Shrink</option> <option value="expand grayscale" selected>Expand grayscale</option> </select> <span class="tooltip">[?] <span class="tooltiptext">What to do if the texture's width or height are not divisible by the resulting number of columns (hue steps &times; number of saturation levels) or rows (luminance steps).</span> </span> </div><div> <button type="button" id="generateButton">Generate Atlas</button> <button type="button" id="downloadButton">Download PNG</button> </div></form> <canvas id="textureAtlas"></canvas> </div><script>function remapHue(e){let t=[{input:0,output:0},{input:60,output:60},{input:120,output:100},{input:180,output:200},{input:240,output:250},{input:300,output:290},{input:360,output:355}];for(;e<0||e>360;)e=(e+360)%360;let n=t.findIndex((n,u)=>e>=n.input&&e<=t[u+1]?.input),u=n+1,a=t[u].input-t[n].input,l=(e-t[n].input)/a,i=t[n].output+(t[u].output-t[n].output)*l;return i}function getInputs(){let e=parseInt(document.getElementById("width").value),t=parseInt(document.getElementById("height").value),n=parseInt(document.getElementById("hueSteps").value),u=parseInt(document.getElementById("hueOffset").value),a=parseInt(document.getElementById("luminanceSteps").value),l=document.getElementById("saturations").value.split(",").map(Number),i=document.getElementById("addGrayscale").checked,s=document.getElementById("hueRemap").checked,o=document.getElementById("behaviorDropdown").value,r=document.getElementById("bordersDropdown").value;return{width:e,height:t,hueSteps:n,hueOffset:u,luminanceSteps:a,saturations:l,addGrayscale:i,hueRemap:s,behavior:o,borders:r}}function validateInputs(){let e=getInputs(),t=e.width,n=e.height,u=e.hueSteps,a=e.hueOffset,l=e.luminanceSteps,i=e.saturations,s=document.getElementById("errorContainer");return(s.innerHTML="",isNaN(t)||isNaN(n)||isNaN(u)||isNaN(a)||isNaN(l))?(s.innerHTML="Width, height, hue steps, hue offset, and luminance steps should be integers.",!1):t<16||t>4096||n<16||n>4096?(s.innerHTML="Width and height should be between 16 and 4096.",!1):u<=0||l<=0?(s.innerHTML="Hue steps and luminance steps should be greater than 0.",!1):!!i.every(e=>Number.isInteger(e)&&e>=0&&e<=100)||(s.innerHTML="Saturations should be integers between 0 and 100.",!1)}"use strict";const canvas=document.getElementById("textureAtlas"),ctx=canvas.getContext("2d"),generateButton=document.getElementById("generateButton"),downloadButton=document.getElementById("downloadButton");function generateTextureAtlas(){if(!validateInputs())return;ctx.clearRect(0,0,canvas.width,canvas.height);let e=getInputs(),t=e.addGrayscale,n=e.behavior,u=e.borders,a=e.luminanceSteps,l=e.hueSteps*e.saturations.length+(t?1:0),i=e.width/l,s=e.height/a,o=0;if(canvas.width=e.width,canvas.height=e.height,"shrink"===n)i=Math.floor(i),s=Math.floor(s);else if("expand grayscale"===n&&t){s=Math.floor(s);let r=Math.floor(i);i=r,o=e.width-r*(l-(t?1:0))-i}if(t)for(let $=0;$<a;$++){let d=100/(e.luminanceSteps-1)*$;ctx.fillStyle=`hsl(0, 0%, ${d}%)`,fillRect(0,$,i,s,l,a,o,u)}for(let h=0;h<e.saturations.length;h++)for(let p=0;p<e.hueSteps;p++)for(let c=0;c<e.luminanceSteps;c++){let g=(e.hueOffset+360/e.hueSteps*p)%360;e.hueRemap&&(g=remapHue(g));let f=e.saturations[h],m=100/(e.luminanceSteps+1)*(c+1);ctx.fillStyle=`hsl(${g}, ${f}%, ${m}%)`;let _=h*e.hueSteps+p+(t?1:0),v=c;fillRect(_,v,i,s,l,a,o,u)}}function fillRect(e,t,n,u,a,l,i,s){let o=0,r=0,$=0,d=0;("both"===s||"columns"===s)&&(o=e>0?1:0,$=0===e||e===a-1?-1:-2),("both"===s||"rows"===s)&&(r=t>0?1:0,d=0===t||t===l-1?-1:-2),ctx.fillRect(e*n+(0===e?0:i)+o,t*u+r,n+$+(0===e?i:0),u+d)}function downloadTextureAtlas(){let e=canvas.toDataURL("image/png"),t=document.createElement("a");t.href=e,t.download="texture_atlas.png",t.click()}downloadButton.addEventListener("click",downloadTextureAtlas),generateButton.addEventListener("click",generateTextureAtlas),generateTextureAtlas();</script></body></html>